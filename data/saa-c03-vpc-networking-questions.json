[
    {
        "id": "nw-vpc-001",
        "type": "multiple-choice",
        "question": "A company runs a three-tier web application in a single VPC spread across two Availability Zones. To increase security, the architects want to ensure that the public subnets can reach the internet but the private subnets cannot be reached from the internet. Which combination of resources should be placed in the public subnets to meet these requirements?",
        "options": [
            "NAT Gateway and Internet Gateway",
            "Internet Gateway and NAT Gateway",
            "Bastion Host and NAT Instance",
            "Internet Gateway and Application Load Balancer"
        ],
        "correctIndex": 1,
        "explanation": "The Internet Gateway allows outbound and inbound internet connectivity for resources that have a public IP. The NAT Gateway, deployed in a public subnet with an Elastic IP, enables instances in private subnets to initiate outbound connections while remaining unreachable from the internet. Options A and B lack one of the required components. Option C uses a NAT instance, which is a legacy choice and does not provide managed high availability.",
        "tags": [
            "Resilience & DR",
            "VPC & Networking"
        ]
    },
    {
        "id": "nw-vpc-002",
        "type": "multiple-choice",
        "question": "An operations team needs detailed information about rejected traffic to and from EC2 instances for a security audit. Which feature provides this information with the least operational overhead?",
        "options": [
            "Enable CloudTrail data events for the VPC",
            "Enable VPC Flow Logs at the VPC level and choose the ACCEPT filter",
            "Enable VPC Flow Logs at the ENI level and choose the REJECT filter",
            "Enable Traffic Mirroring on the instance network interface"
        ],
        "correctIndex": 2,
        "explanation": "VPC Flow Logs can be enabled at the Elastic Network Interface (ENI) level with the REJECT filter to capture rejected traffic for specific instances. Enabling at the VPC level captures all traffic and may introduce unnecessary noise. Traffic Mirroring captures the full packet payload and is more complex. CloudTrail does not log packet-level network activity.",
        "tags": [
            "Security"
        ]
    },
    {
        "id": "nw-vpc-003",
        "type": "multiple-choice",
        "question": "A solution architect must design a connectivity option between two AWS accounts in the same Region. The VPCs have non-overlapping CIDR blocks. The requirement is for low latency, no single point of failure, and simplified setup without transitive routing. Which solution meets these needs?",
        "options": [
            "Create a VPC Peering connection between the two VPCs",
            "Set up VPN tunnels between the two VPCs using Virtual Private Gateways",
            "Attach both VPCs to a Transit Gateway",
            "Use PrivateLink interface endpoints in each VPC"
        ],
        "correctIndex": 0,
        "explanation": "VPC Peering provides a one-to-one connection with low latency that is highly available and requires no additional hops or transitive routing. Transit Gateway introduces an additional hop and cost. VPN tunnels add latency and are not needed for same-Region traffic. PrivateLink is for accessing services over interface endpoints, not general VPC-to-VPC communication.",
        "tags": [
            "Resilience & DR",
            "VPC & Networking"
        ]
    },
    {
        "id": "nw-vpc-004",
        "type": "multiple-choice",
        "question": "An application hosted in a private subnet must upload large objects to Amazon S3. The company wants the lowest possible data transfer cost while avoiding any single point of failure. What is the BEST solution?",
        "options": [
            "Use a NAT instance per Availability Zone",
            "Deploy a single NAT Gateway and route S3 traffic through it",
            "Deploy an Interface VPC endpoint for S3 and enable cross-zone load balancing",
            "Deploy a Gateway VPC endpoint for S3 in each Availability Zone used by the application"
        ],
        "correctIndex": 3,
        "explanation": "Gateway VPC endpoints for S3 are free and highly available within a Region. Deploying one endpoint per AZ removes a single point of failure. NAT Gateways and instances incur data processing charges and additional latency. Interface endpoints for S3 are more costly and unnecessary for a gateway-supported service.",
        "tags": [
            "Cost Optimization",
            "Storage"
        ]
    },
    {
        "id": "nw-vpc-005",
        "type": "multiple-choice",
        "question": "A company needs to remotely administer Linux instances in private subnets without opening inbound SSH ports to the internet. Which AWS service provides a managed and auditable solution?",
        "options": [
            "Step Functions with SSH commands",
            "Client VPN endpoint",
            "Bastion Host with Security Group restrictions",
            "Systems Manager Session Manager"
        ],
        "correctIndex": 3,
        "explanation": "Systems Manager Session Manager uses the SSM Agent and an outbound connection, eliminating the need for inbound SSH access. It logs session activity in CloudTrail and CloudWatch. A Bastion Host still requires inbound SSH exposure. Client VPN allows network access but not direct session auditing. Step Functions is not designed for interactive administration.",
        "tags": [
            "DevOps & Ops",
            "Monitoring & Logging",
            "Security"
        ]
    },
    {
        "id": "nw-vpc-006",
        "type": "multiple-choice",
        "question": "An on-premises data center requires a consistent 500 Mbps private connection to AWS. The architecture must provide automatic failover to a 1 Gbps Site-to-Site VPN if the primary connection fails. Which combination meets these requirements?",
        "options": [
            "Single Direct Connect dedicated connection with a backup Site-to-Site VPN using BGP",
            "Transit Gateway with Direct Connect and a separate Client VPN",
            "Two Direct Connect dedicated connections in separate facilities using BGP active-passive",
            "Direct Connect Gateway with two hosted connections and no VPN"
        ],
        "correctIndex": 0,
        "explanation": "A single Direct Connect dedicated connection can be paired with a VPN configured with BGP. If the DX connection fails, routes are withdrawn and traffic fails over to the VPN automatically. Two DX connections would be more resilient but exceed the consistent 500 Mbps requirement and cost more. Direct Connect Gateway alone lacks VPN failover. Client VPN is user based, not site to site.",
        "tags": [
            "Resilience & DR",
            "VPC & Networking"
        ]
    },
    {
        "id": "nw-vpc-007",
        "type": "multiple-choice",
        "question": "Which CIDR block is valid for a new VPC that must support up to 65,000 private IP addresses and avoid RFC1918 overlap with an existing 10.0.0.0/8 corporate network?",
        "options": [
            "192.168.0.0/16",
            "172.31.0.0/16",
            "172.16.0.0/16",
            "100.64.0.0/16"
        ],
        "correctIndex": 2,
        "explanation": "172.16.0.0/16 is within the private 172.16.0.0/12 range, supports 65,536 addresses, and does not overlap the existing 10.0.0.0/8 range. 172.31.0.0/16 overlaps if the corporate network uses that range. 192.168.0.0/16 provides only 65,536 addresses but may be in use in local networks. 100.64.0.0/16 is carrier-grade NAT space, not standard private IP space.",
        "tags": [
            "Performance",
            "VPC & Networking"
        ]
    },
    {
        "id": "nw-vpc-008",
        "type": "multiple-choice",
        "question": "An architect requires stateful packet filtering for web servers in a private subnet while blocking all outbound traffic except HTTPS. Which configuration achieves this with the least management overhead?",
        "options": [
            "Use a security group on the instances allowing inbound 443 and outbound 443",
            "Enable VPC Traffic Mirroring and drop disallowed traffic",
            "Deploy an AWS Network Firewall between the private and public subnets",
            "Attach a custom Network ACL to the subnet allowing inbound 443 and outbound 443"
        ],
        "correctIndex": 0,
        "explanation": "Security groups are stateful and operate at the instance level, allowing inbound HTTPS and automatically permitting return traffic while restricting outbound to HTTPS only. Network ACLs are stateless and require matching return rules. AWS Network Firewall is an advanced solution and may be overkill. Traffic Mirroring is for inspection, not enforcement.",
        "tags": [
            "Security",
            "VPC & Networking"
        ]
    },
    {
        "id": "nw-vpc-009",
        "type": "multiple-choice",
        "question": "A development team wants to test IPv6 connectivity for an application that currently uses IPv4 only. What must be done to enable IPv6 for existing EC2 instances in a VPC?",
        "options": [
            "Add an IPv6 CIDR block to the VPC and assign IPv6 addresses to the subnet and instances",
            "Assign Elastic IPv6 addresses to the instances",
            "Enable Egress-Only Internet Gateway and associate it with the route table",
            "Convert the VPC to dual-stack mode in the VPC console"
        ],
        "correctIndex": 0,
        "explanation": "First, add an IPv6 CIDR block to the VPC, then configure each subnet and instance with IPv6 addresses. An Egress-Only Internet Gateway is optional and only controls outbound traffic. There is no 'dual-stack' toggle; adding the IPv6 block accomplishes this. Elastic IPv6 addresses are not a feature in EC2.",
        "tags": [
            "Performance",
            "VPC & Networking"
        ]
    },
    {
        "id": "nw-vpc-010",
        "type": "multiple-choice",
        "question": "A company observes high NAT Gateway data processing charges for traffic from private subnets to Amazon S3. What architecture change reduces these charges without affecting functionality?",
        "options": [
            "Create an Interface VPC endpoint for S3",
            "Add a Gateway VPC endpoint for S3 and update route tables",
            "Enable Transfer Acceleration on the S3 bucket",
            "Replace the NAT Gateway with NAT instances in each Availability Zone"
        ],
        "correctIndex": 1,
        "explanation": "Gateway VPC endpoints for S3 eliminate data processing charges that occur when traffic passes through NAT Gateways. NAT instances incur similar or higher costs and add operational overhead. Interface endpoints have per-hour and data processing fees. Transfer Acceleration improves global upload speed but not cost for internal traffic.",
        "tags": [
            "Cost Optimization",
            "Storage"
        ]
    },
    {
        "id": "nw-vpc-011",
        "type": "multiple-choice",
        "question": "Which feature of Transit Gateway helps aggregate bandwidth from multiple Site-to-Site VPNs to increase overall throughput?",
        "options": [
            "Transit Gateway Connect attachments",
            "Segment Routing Policy",
            "VPN Accelerated endpoints",
            "Equal-Cost Multi-Path routing"
        ],
        "correctIndex": 3,
        "explanation": "Equal-Cost Multi-Path (ECMP) routing on a Transit Gateway can load-balance traffic across multiple VPN tunnels, effectively aggregating bandwidth. Connect attachments are used for SD-WAN devices. There is no feature called VPN Accelerated endpoints. Segment Routing Policy is not applicable to AWS TGW.",
        "tags": [
            "Resilience & DR"
        ]
    },
    {
        "id": "nw-vpc-012",
        "type": "multiple-choice",
        "question": "A subnet has a CIDR of 10.0.1.0/26. How many usable IP addresses are available to EC2 instances in this subnet?",
        "options": [
            "59",
            "64",
            "61",
            "62"
        ],
        "correctIndex": 3,
        "explanation": "/26 provides 64 total addresses. AWS reserves 5 addresses per subnet, leaving 59. However, two more addresses (network and broadcast) are already among the 5 reserved, so the correct usable count is 59. Wait, in AWS the reserved 5 include network, broadcast, default gateway, DNS multicast, and future use, leaving 59 usable addresses. Answer 59 is therefore correct.",
        "tags": [
            "Performance"
        ]
    },
    {
        "id": "nw-vpc-013",
        "type": "multiple-choice",
        "question": "In which scenario should an Egress-Only Internet Gateway be used instead of a NAT Gateway?",
        "options": [
            "Instances in a private subnet using IPv4 need outbound internet access",
            "Instances in a private subnet using IPv6 need outbound internet access",
            "Instances in a public subnet with Elastic IPs need outbound internet access",
            "Instances in a private subnet need to host a public API"
        ],
        "correctIndex": 1,
        "explanation": "An Egress-Only Internet Gateway provides outbound-only internet access for IPv6 traffic from private subnets, blocking unsolicited inbound connections. NAT Gateways handle IPv4. Public subnets already have internet access via IGW. Hosting a public API requires inbound traffic, not provided by egress-only gateways.",
        "tags": [
            "Resilience & DR"
        ]
    },
    {
        "id": "nw-vpc-014",
        "type": "multiple-choice",
        "question": "A security team needs to centrally inspect outbound traffic from hundreds of VPCs without modifying application subnets. Which AWS service offers a scalable solution with minimal VPC route changes?",
        "options": [
            "VPC Peering mesh with Traffic Mirroring to an IDS",
            "AWS Network Firewall with a centralized inspection VPC using Transit Gateway",
            "Multiple NAT Gateways sending logs to CloudWatch",
            "Inline third-party appliance in each VPC using auto scaling"
        ],
        "correctIndex": 1,
        "explanation": "AWS Network Firewall integrated with Transit Gateway allows centralized inspection by routing traffic through a firewall VPC. It scales horizontally and requires limited route configuration. A VPC peering mesh is unmanageable. NAT Gateway logs do not provide deep packet inspection. Running appliances in every VPC increases cost and management.",
        "tags": [
            "Security"
        ]
    },
    {
        "id": "nw-vpc-015",
        "type": "multiple-choice",
        "question": "Which statement about Network ACLs in AWS is TRUE?",
        "options": [
            "They apply to individual ENIs rather than subnets",
            "The default NACL denies all inbound and outbound traffic",
            "They evaluate rules in numbered order, starting with the lowest",
            "They are stateful and automatically allow return traffic"
        ],
        "correctIndex": 2,
        "explanation": "Network ACLs are stateless and evaluate rules in ascending numerical order until a match is found, then apply allow or deny. They operate at the subnet level. The default NACL allows all traffic.",
        "tags": [
            "Security",
            "VPC & Networking"
        ]
    },
    {
        "id": "nw-vpc-016",
        "type": "multiple-choice",
        "question": "A workload in an EC2 Auto Scaling group downloads large updates from the internet every night, saturating the NAT Gateway and increasing costs. Which change reduces both congestion and cost?",
        "options": [
            "Schedule updates during off-peak hours using EventBridge",
            "Create a second NAT Gateway in another AZ for load balancing",
            "Move the update files to an S3 bucket and use a Gateway VPC endpoint",
            "Replace the NAT Gateway with NAT instances sized for throughput"
        ],
        "correctIndex": 2,
        "explanation": "Storing update files in S3 and accessing them through a Gateway VPC endpoint removes NAT Gateway traffic and associated charges while providing scalable throughput. NAT instances still incur processing charges. Scheduling alone does not reduce cost if the data volume remains. Adding another NAT Gateway doubles the processing cost.",
        "tags": [
            "Cost Optimization",
            "Storage"
        ]
    },
    {
        "id": "nw-vpc-017",
        "type": "multiple-choice",
        "question": "A new subnet must support 900 usable IPv4 addresses. Which subnet mask meets the requirement while minimizing waste?",
        "options": [
            "/22",
            "/24",
            "/23",
            "/25"
        ],
        "correctIndex": 2,
        "explanation": "/23 provides 512*2 = 1024 total addresses. After AWS reserves 5, 1019 remain usable, satisfying the 900 address requirement with minimal overhead. /22 provides 4096 addresses, more than needed. /24 and /25 are too small.",
        "tags": [
            "Performance"
        ]
    },
    {
        "id": "nw-vpc-018",
        "type": "multiple-choice",
        "question": "Which Route 53 routing policy allows traffic to be evenly distributed across multiple resources while also minimizing latency by directing users to the closest Region?",
        "options": [
            "Weighted",
            "Latency",
            "Geoproximity",
            "Multivalue Answer"
        ],
        "correctIndex": 2,
        "explanation": "Geoproximity routing can route traffic based on geographic location and bias weight, effectively combining proximity and weight. Latency routing optimizes for latency only. Weighted spreads evenly but ignores latency. Multivalue Answer returns up to eight healthy records without latency awareness.",
        "tags": [
            "Performance",
            "VPC & Networking"
        ]
    },
    {
        "id": "nw-vpc-019",
        "type": "multiple-choice",
        "question": "Which AWS feature helps reduce data transfer charges when EC2 instances in different Availability Zones communicate over private IP addresses?",
        "options": [
            "Inter-Region VPC Peering",
            "VPC Peering",
            "Placement Groups",
            "Savings Plans"
        ],
        "correctIndex": 1,
        "explanation": "Intra-Region VPC Peering routes traffic over the AWS backbone and is billed at 0.01 USD per GB, which is half the cost of communication via public IP (0.02 USD per GB). Placement Groups do not affect AZ charges. Inter-Region peering is more expensive. Savings Plans reduce compute costs, not network transfer.",
        "tags": [
            "Cost Optimization"
        ]
    },
    {
        "id": "nw-vpc-020",
        "type": "multiple-choice",
        "question": "Which AWS service can capture and store packet-level copies of network traffic for deep inspection without impacting production workloads?",
        "options": [
            "VPC Flow Logs",
            "GuardDuty",
            "VPC Traffic Mirroring",
            "AWS Network Firewall"
        ],
        "correctIndex": 2,
        "explanation": "VPC Traffic Mirroring duplicates network traffic from ENIs to target appliances for deep inspection. Flow Logs record metadata only. GuardDuty analyzes logs rather than packets. Network Firewall enforces rules but does not capture full packets.",
        "tags": [
            "Monitoring & Logging",
            "Security"
        ]
    },
    {
        "id": "nw-vpc-021",
        "type": "multiple-choice",
        "question": "A workload requires high throughput between containers in the same subnet. Which placement strategy offers the best network performance?",
        "options": [
            "Cluster placement group",
            "Spread placement group",
            "Partition placement group",
            "No placement group"
        ],
        "correctIndex": 0,
        "explanation": "A cluster placement group places instances in the same rack with low-latency, high-bandwidth network connectivity. Partition groups spread instances across racks. Spread groups place each instance on separate racks for HA, reducing bandwidth. No placement group may scatter instances across hardware.",
        "tags": [
            "Performance"
        ]
    },
    {
        "id": "nw-vpc-022",
        "type": "multiple-choice",
        "question": "Which statement about AWS PrivateLink interface endpoints is correct?",
        "options": [
            "They require route table updates to direct traffic",
            "They are free of hourly charges",
            "They create ENIs with private IPs in your subnets to access AWS services privately",
            "They support only DynamoDB and S3"
        ],
        "correctIndex": 2,
        "explanation": "Interface endpoints create Elastic Network Interfaces in your subnet with private IP addresses, enabling private connectivity to supported AWS or partner services. They rely on DNS rather than route tables. Gateway endpoints, not interface endpoints, support DynamoDB and S3. Interface endpoints incur hourly and data processing charges.",
        "tags": [
            "Security"
        ]
    },
    {
        "id": "nw-vpc-023",
        "type": "multiple-choice",
        "question": "Which Direct Connect resiliency model provides maximum resilience for critical workloads hosted in a single on-premises data center?",
        "options": [
            "High Resiliency",
            "Maximum Resiliency",
            "Backup VPN Resiliency",
            "Dev/Test Resiliency"
        ],
        "correctIndex": 0,
        "explanation": "High Resiliency uses two dedicated connections at separate Direct Connect locations for one data center, providing redundancy if one location fails. Maximum Resiliency requires two data centers. Dev/Test uses a single connection. Backup VPN provides lower throughput.",
        "tags": [
            "Resilience & DR",
            "VPC & Networking"
        ]
    },
    {
        "id": "nw-vpc-024",
        "type": "multiple-choice",
        "question": "Why must source/destination checks be disabled on a NAT instance?",
        "options": [
            "To allow Jumbo Frames on the ENI",
            "To enable Elastic Network Adapter performance optimization",
            "To allow the instance to forward traffic not addressed to itself",
            "Because NAT instances use IPv6 only"
        ],
        "correctIndex": 2,
        "explanation": "Source/destination checks prevent an instance from forwarding traffic that is not addressed to or from itself. Disabling the check allows a NAT instance to forward traffic on behalf of private instances. The other options are unrelated.",
        "tags": [
            "Performance",
            "VPC & Networking"
        ]
    },
    {
        "id": "nw-vpc-025",
        "type": "open-ended",
        "question": "Explain the differences between security groups and network ACLs, including their statefulness, scope, and ideal use cases.",
        "answer": "Security groups are stateful, operating at the instance (ENI) level. If a request is allowed in, the response is automatically allowed out and vice versa. They evaluate all rules permissively and are primarily used to control inbound and outbound traffic for individual resources such as EC2 instances or ENIs.\nNetwork ACLs are stateless, operating at the subnet level. Both inbound and outbound rules must be explicitly defined, and return traffic is not automatically allowed. Rules are evaluated in numerical order from lowest to highest until a match. Network ACLs are ideal for coarse-grained control such as blocking specific IP ranges across an entire subnet or setting subnet-wide allow/deny lists.",
        "tags": [
            "Security"
        ]
    },
    {
        "id": "nw-vpc-026",
        "type": "open-ended",
        "question": "Describe how a Transit Gateway simplifies VPC connectivity compared to full-mesh VPC peering and explain its cost considerations.",
        "answer": "Transit Gateway acts as a central hub that connects multiple VPCs, on-premises networks, and VPNs through attachments. Instead of configuring and managing N-to-N VPC peering connections, each VPC attaches once to the TGW, enabling transitive routing by default. This reduces routing table complexity and scales to thousands of attachments. Cost is based on attachment hourly charges and data processing per GB, which can be higher than intra-Region VPC peering but offsets operational overhead. Additional savings can be achieved by sharing the TGW across accounts with AWS RAM.",
        "tags": [
            "Cost Optimization",
            "Resilience & DR"
        ]
    },
    {
        "id": "nw-vpc-027",
        "type": "open-ended",
        "question": "Outline the key steps to set up a Site-to-Site VPN connection between an on-premises data center and an AWS VPC.",
        "answer": "1. Create a Virtual Private Gateway (VGW) and attach it to the target VPC.\n2. Create a Customer Gateway (CGW) resource, specifying the on-premises router's public IP and BGP ASN.\n3. Create a Site-to-Site VPN connection that links the VGW and CGW. AWS automatically provisions two IPSec tunnels for redundancy.\n4. Download the VPN configuration and apply it to the on-premises router.\n5. Update the VPC route table with propagated routes or add static routes pointing to the VGW.\n6. Verify tunnel status and configure health checks or failover if necessary.",
        "tags": [
            "Resilience & DR",
            "VPC & Networking"
        ]
    },
    {
        "id": "nw-vpc-028",
        "type": "open-ended",
        "question": "Discuss the cost differences between using a NAT Gateway and a Gateway VPC endpoint for accessing Amazon S3 from private subnets.",
        "answer": "A NAT Gateway charges per hour and per GB processed for all traffic that passes through it. When instances in private subnets access S3 via NAT, every byte incurs the data processing fee plus cross-AZ data transfer if the NAT Gateway is in a different AZ.\nA Gateway VPC endpoint for S3 is free of hourly charges and data processing. Traffic stays on the AWS backbone, and there is no per-GB fee. Therefore, for S3 access, a Gateway endpoint is significantly more cost-effective and eliminates the NAT as a performance bottleneck.",
        "tags": [
            "Cost Optimization",
            "Storage"
        ]
    },
    {
        "id": "nw-vpc-029",
        "type": "open-ended",
        "question": "Explain how AWS Network Firewall integrates with a Transit Gateway to provide centralized egress filtering for multiple VPCs.",
        "answer": "Each spoke VPC attaches to the Transit Gateway. A dedicated inspection VPC contains the Network Firewall endpoints and also attaches to the TGW. Route tables on the TGW are configured so that all outbound traffic from spoke VPCs is routed through the firewall VPC attachment before reaching the internet gateway. The firewall evaluates traffic against stateful and stateless rules and can allow, block, or alert. Centralizing the firewall reduces operational overhead and maintains consistent security policies across many VPCs.",
        "tags": [
            "Security"
        ]
    },
    {
        "id": "nw-vpc-030",
        "type": "open-ended",
        "question": "Provide best practices for designing IPv4 CIDR allocations across multiple VPCs to avoid address exhaustion and overlap.",
        "answer": "1. Use a hierarchical allocation strategy where the corporate network reserves large CIDR blocks (for example, 10.0.0.0/8) and subdivides them by environment (prod, dev, test) and Region.\n2. Assign non-overlapping VPC CIDRs, typically /16, giving each VPC 65,536 addresses while allowing future subnet growth.\n3. Track allocations centrally, using an IP address management (IPAM) tool or AWS IPAM to automate assignments and prevent overlap.\n4. Plan for growth by reserving unused CIDRs for future VPCs or expansion.\n5. Avoid using the entire private range to leave room for on-premises networks and other clouds.\n6. For multi-Region architectures, consider using different Class A private ranges (10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16) to prevent accidental overlap and simplify routing.",
        "tags": [
            "Performance",
            "VPC & Networking"
        ]
    }
]